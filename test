/**
 * Скрива table-rows извън текущия range:
 * - при days ≤ 10: остава видим само последните 10
 * - при days > 10: остава видим само последните days
 */
function updateTableRows(days) {
  const rows = Array.from(
    document.getElementById('recordsTable')
            .getElementsByTagName('tr')
  ).slice(1);  // пропускаме header-а
  const n = rows.length;

  // Ако нямаме поне 1 ред, нищо не правим
  if (n === 0) return;

  // Започваме от този индекс
  const start = days <= 10
    ? Math.max(0, n - 10)    // винаги последните 10, ако могат
    : Math.max(0, n - days); // или последните days

  rows.forEach((tr, i) => {
    tr.hidden = i < start;
  });
}



/**
 * Скрива (hidden) всички table-rows извън текущия range,
 * но само когато days > 10. Последните 10 винаги остават видими.
 */
function updateTableRows(days) {
  // всички редове, без header-а
  const rows = Array.from(
    document.getElementById('recordsTable')
            .getElementsByTagName('tr')
  ).slice(1);
  const n = rows.length;

  if (days > 10) {
    // index от k до n-1 ще са видими, където k = n - days
    const k = n - days;
    rows.forEach((tr, i) => {
      // ако i < k – скрий, иначе – покажи
      tr.hidden = i < k;
    });
  } else {
    // days ≤ 10: не пипаме таблицата – махаме hidden на всички
    rows.forEach(tr => tr.hidden = false);
  }
}


function onDaysChange() {
  const days = parseInt(slider.value, 10);
  label.textContent = days;

  updateContainerWidth(days);
  updateTableRows(days);    // <— добавяш го тук
  renderElapsedChart();     // вече той рисува графиката
}
